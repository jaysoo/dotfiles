module Warnings
  def warnings
    @warnings ||= ActiveModel::Errors.new(self)
  end

  def has_warnings?
    self.warnings.size > 0
  end

  def copy_warnings_to_base_from other
    other.warnings.each do |attr, msg|
      self.warnings.add :base, construct_warning_message(other, attr, msg)
    end if other
  end

  private
  def construct_warning_message model, attr, msg
    humanized_model_name = model.class.model_name.human
    attr == :base ? msg : "#{humanized_model_name} #{model.class.human_attribute_name(attr)} #{msg}"
  end
end
