define("Quoting.TimeDrivenChargesCtrl", function(module) {
  function FixedCharge(name, totalCost, markup){
    this.name = name;
    this.totalCost = totalCost;
    this.markup = markup;
  }

  function Quote(opts){
    opts = opts || {};
    this.quotedRunRate = opts.quotedRunRate;
    this.scheduledHours = opts.scheduledHours;
    this.fixedCharges = opts.fixedCharges;
  }

  Quote.prototype.costPerHour = function(fixedCharge){
    return fixedCharge.totalCost / this.scheduledHours;
  }

  Quote.prototype.costPerCase = function(fixedCharge){
    return this.costPerHour(fixedCharge) / this.quotedRunRate;
  }

  Quote.prototype.pricePerCase = function(fixedCharge){
    return this.costPerCase(fixedCharge) * (1 + fixedCharge.markup / 100);
  }

  function TimeDrivenChargesCtrl(quotesRepo) {
    this.quotesRepo = quotesRepo

    this.form = new Quote(1800, 400, [new FixedCharge('Packing', 622000, 6)])
  }

  TimeDrivenChargesCtrl.prototype.createQuote = function(formData) {
    this.quotesRepo.create(formData)
  }

  module.exports = TimeDrivenChargesCtrl
})
