define("Quoting.QuoteCtrl", function(module) {
  var quoteDeserializer = require("Quoting.QuoteDeserializer")

  function QuoteCtrl(quoteStatuses, quoteData, quotesRepo) {
    _.bindAll(this)
    this.mode = 'show'
    this.quote = quoteDeserializer(quoteData)
    this.quotesRepo = quotesRepo
    this.quoteStatuses = quoteStatuses
  }

  _.extend(QuoteCtrl.prototype, {
    updateQuote: function(formData) {
      this.quotesRepo.update(formData).then(this.switchToEdit)
    },


    switchToShow: function() {
      this.mode = 'show'
    },

    switchToEdit: function() {
      this.mode = 'edit'
    }
  })

  module.exports = QuoteCtrl
})
